# Dimension configuration

This section will focus on defining dimension columns, their presence in the structure of a cube configuration file, and the various options for configuring code lists. Details of dimension configuration options can be found in the [Reference table](#reference) at the bottom of this page.

The [Sweden at Eurovision data set](../../../quick-start/designing-csv.md#adding-your-data) consists of four dimensions - `Year`, `Entrant`, `Song` and `Language`. Examples of how these dimensions could be configured are as follows.

```json
{ ...
   "columns": {
      "Year": {
         "from_template": "year",
         "label": "Competition year"
      },
      "Entrant": {
         "type": "dimension",
         "description": "The act representing Sweden at Eurovision for the given year",
         "definition_uri": "http://example.org/swedish-eurovision-acts",
         "code_list": "my_eurovision_code_list_config.json"
      },
      "Song": {
         "from_existing": "http://example.org/dimension/eurovision-songs",
         "cell_uri_template": "http://example.org/code-lists/eurovision-songs/{+song}"
      },
      "Language": {
         "code_list": "false",
         "cell_uri_template": "http://example.org/eurovision-languages/{+language}"
      }
   }
}
```

Taking each of these dimensions one-by-one:

```json
{ ...
   "columns": {
      "Year": {
         "from_template": "year",
         "label": "Competition year"
      }
   }
}
```

The `Year` column uses a [column template](../templates.md#datetime-period-template) - doing so means that the `type`, `from_existing`, `label` and `cell_uri_template` fields will be automatically populated based on the [calendar-year.json](https://purl.org/csv-cubed/qube-config/templates/calendar-year.json) template. However, these fields can also be overridden, as is the case here, since the `label` has been defined as "Competition year".

A code list will be automatically generated by csvcubed for the `Year` column, since the default value for the `code_list` is `true`. Note that the `type` of this column has not been defined, meaning that csvcubed will interpret the `Year` column as a dimension by default.

```json
{ ...
   "columns": {
      "Entrant": {
         "type": "dimension",
         "description": "The act representing Sweden at Eurovision for the given year",
         "definition_uri": "http://example.org/swedish-eurovision-acts",
         "code_list": "entrant_code_list_config.json"
      }
   }
}
```

The `Entrant` column has been explicitly configured with a `type` of dimension, although strictly speaking this is unnecessary, as a column will be designated as a dimension by default if `type` is not defined.

The `description` field allows additional information to be associated with a column, and `definition_uri` allows you to point to a human-readable resource that further defines the column values, such as a PDF document.

A code list will be generated by csvcubed for the `Entrant` column, based on the `entrant_code_list_config.json` file provided. See the [code list configuration](../code-list-config.md#defining-a-code-list-configuration-file) page for further instructions. Alternatively, code lists can be [defined in-line](../code-list-config.md#defining-an-in-line-code-list) within the `qube-config.json` itself, or can point to a uri by setting `"code_list": "uri"`.

```json
{ ...
   "columns": {
      "Song": {
         "from_existing": "http://example.org/dimension/eurovision-songs",
         "cell_uri_template": "http://example.org/code-lists/eurovision-songs/{+song}"
      },
      "Language": {
         "code_list": "false",
         "cell_uri_template": "http://example.org/eurovision-languages/{+language}"
      }
   }
}
```

The `Song` and `Language` columns have both been configured with a `cell_uri_template` field. It is important to note that this field should only be used where the concept scheme is defined externally at an existing URI, or there is no concept scheme, but you want to point to an existing resource to provide additional context about the dimension's value.

**The use of the `cell_uri_template` field is considered an advanced configuration option, and therefore care must be taken to ensure that the values generated are valid.**

If `cell_uri_template` is specified:

**Either**:

- `from_existing` must also be defined, in which case `cell_uri_template` should refer to the concepts in the existing dimension's code list;

**Or**:

- `code_list` must be set as `false`, in which case `cell_uri_template` should refer to URIs which are existing RDF resources.

The format of the `cell_uri_template` value **must** follow [RFC6570](https://www.rfc-editor.org/rfc/rfc6570) guidance for URI Templates. In the case of any doubt, follow the pattern in the examples shown above (e.g. `http://example.org/some-uri/{+column_name}`), as this will ensure csvcubed safely [transforms the column header](../../uris.md#csv-column-name-safe-transformation) to the CSV-W format.

## Reference

The following fields can be configured for each dimension in your data set. csvcubed will assume that a column represents a dimension if the `type` field is left blank, or explicitly specified as `dimension`.

| **field name**      | **description**                                                                                                                                                                                                                                                                                       | **default value**                                                                               |
|---------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------|
| `type`              | The type of the column. This can be left blank to configure a column as a dimension by default.                                                                                                                                                                                                       | *dimension*                                                                                     |
| `label`             | The title of the column (Optional)                                                                                                                                                                                                                                                                    | The capital case version of the column header in the csv file with spaces replacing underscores |
| `description`       | A description of the contents of the column (Optional)                                                                                                                                                                                                                                                | *none*                                                                                          |
| `from_template`     | Use a [column template](../templates.md) (Optional)                                                                                                                                                                                                                                                   | *none*                                                                                          |
| `from_existing`     | The uri of the resource for reuse/extension (Optional)                                                                                                                                                                                                                                                | *none*                                                                                          |
| `code_list`         | Generate a code-list (true), suppress a code-list (false), file path to a [code-list-config.json](../code-list-config.md#defining-a-code-list-configuration-file), [in-line code list](../code-list-config.md#defining-an-in-line-code-list) (json), or link to an externally-defined code list (uri) | true                                                                                            |
| `definition_uri`    | A uri of a resource to show how the column is created/managed (e.g. a uri of a PDF explaining a list of units) (Optional)                                                                                                                                                                             | *none*                                                                                          |
| `cell_uri_template` | **(Advanced)** Override the uri generated for values within the uri (Optional)                                                                                                                                                                                                                        | *none*                                                                                          |
<!-- TODO: uri_override not in schema -->
<!-- | `uri_override`      | Override the uri created automatically for the column (Optional) (Advanced)                                                                                                                                          | `tidy_data.csv#uri_safe_column_header_from_csv`                                  | -->
