{
    "$schema": "http://gss-cogs.github.io/gss-cogs/csvcubed/csvcubed/schemas/cube-config-schema.json",
    "id": "http://gss-cogs.github.io/gss-cogs/csvcubed/csvcubed/schemas/cube-config-schema.json",
    "title": "Schema for a qb-config cube",
    "description": "Schema to be used for creation & validation of a single csv-cubed-flavoured linked data cube in CSV-W format",
    "type": "object",
    "required": ["$schema"],
    "properties": {
        "$schema": {
            "type": "string",
            "default": "http://gss-cogs.github.io/gss-cogs/csvcubed/csvcubed/schemas/cube-config-schema.json",
        },
        "id": {"description": "A unique id for the cube", "type": "string"},
        "title": {"description": "A title for this dataset", "type": "string"},
        "description": {"description": "A description of the cube", "type": "string"},
        "summary": {"description": "A summary of the cube", "type": "string"},
        "publisher": {
            "description": "The schema publisher link uri",
            "type": "string",
            "format": "uri",
        },
        "creator": {
            "description": "The schema creator link uri",
            "type": "string",
            "format": "uri",
        },
        "spatial_bound": {
            "description": "URI that defines the spatial / geographic bounds of the data contained herein",
            "type": "string",
            "format": "uri",
            "default": "https://tdg.docbook.org/tdg/publishers/5.1/dcterms.html#dcterms.spatial",
        },
        "temporal_bound": {
            "description": "URI that defines the temporal bounds of the data contained herein",
            "type": "string",
            "format": "uri",
            "default": "https://tdg.docbook.org/tdg/publishers/5.1/dcterms.html#dcterms.temporal",
        },
        "themes": {"$ref": "#/definitions/v1.0/themeTypes"},
        "keywords": {"$ref": "#/definitions/v1.0/keywordTypes"},
        "dataset_issued": {
            "description": "UTC Date time that the cube's dataset was initially published in ISO8601 format",
            "type": "string",
            "format": "date-time",
        },
        "dataset_modified": {
            "description": "UTC Date time that the cube's dataset was last modified published in ISO8601 format",
            "type": "string",
            "format": "date-time",
        },
        "license": {
            "description": "URI that the license for this data cube",
            "type": "string",
            "format": "uri",
        },
        "columns": {
            "description": "The mapping from column names to data cube components",
            "additionalProperties": {
                "description": "A column name to component mapping",
                "anyOf": [
                    {"$ref": "#/definitions/v1.0/columnTypes/Dimension"},
                    {"$ref": "#/definitions/v1.0/columnTypes/Attribute"},
                    {"$ref": "#/definitions/v1.0/columnTypes/Measure"},
                    {"$ref": "#/definitions/v1.0/columnTypes/Observation"},
                    {"$ref": "#/definitions/v1.0/columnTypes/Unit"},
                ],
            },
        },
    },
    "definitions": {
        "v1.0": {
            "columnTypes": {
                "Attribute": {
                    "description": "Definition of units for the observation",
                    "type": "object",
                    "additionalProperties": false,
                    "required": ["type", "values"],
                    "properties": {
                        "type": {
                            "description": "An Attribute Column Type",
                            "type": "string",
                            "default": "attribute",
                        },
                        "values": {
                            "oneOf": [
                                {"$ref": "#/definitions/v1.0/valueTypes/boolValueTrue"},
                                {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/definitions/v1.0/valueTypes/attributeType"
                                    },
                                },
                            ]
                        },
                    },
                },
                "Dimension": {
                    "description": "A Dimension column",
                    "$ref": "#/definitions/v1.0/valueTypes/dimensionType",
                },
                "Measure": {
                    "description": "Definition of how the observation value is being measured",
                    "type": "object",
                    "additionalProperties": false,
                    "required": ["type"],
                    "properties": {
                        "type": {
                            "description": "A Measure Column Type",
                            "type": "string",
                            "default": "measure",
                        },
                        "cell_uri_template": {"type": "string", "format": "uri"},
                        "values": {
                            "oneOf": [
                                {"$ref": "#/definitions/v1.0/valueTypes/boolValueTrue"},
                                {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/definitions/v1.0/valueTypes/measureType"
                                    },
                                },
                            ]
                        },
                    },
                },
                "Unit": {
                    "description": "Definition the unit",
                    "type": "object",
                    "required": ["type", "values"],
                    "properties": {
                        "type": {
                            "description": "A Unit Column Type",
                            "type": "string",
                            "default": "unit",
                        },
                        "values": {
                            "oneOf": [
                                {"$ref": "#/definitions/v1.0/valueTypes/boolValueTrue"},
                                {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/definitions/v1.0/valueTypes/unitType"
                                    },
                                },
                            ]
                        },
                    },
                    "additionalProperties": false,
                },
                "Observation": {
                    "description": "An observation",
                    "$ref": "#/definitions/v1.0/valueTypes/observationType",
                },
            },
            "units": {
                "boolUnit": {
                    "description": "Definition of the unit",
                    "type": "object",
                    "additionalProperties": false,
                    "required": ["type", "value"],
                    "properties": {
                        "type": {
                            "description": "A Unit Column Type",
                            "type": "string",
                            "default": "units",
                        },
                        "value": {"type": "boolean"},
                        "cell_uri_template": {"type": "string", "format": "uri"},
                    },
                }
            },
            "valueTypes": {
                "attributeType": {
                    "type": "object",
                    "additionalProperties": false,
                    "required": ["label"],
                    "properties": {
                        "label": {
                            "type": "string",
                            "description": "A label for the attribute values",
                        },
                        "description": {
                            "type": "string",
                            "description": "The description of the attribute values",
                        },
                        "from_existing": {
                            "description": "The URI to an existing set of values",
                            "$ref": "http://gss-cogs.github.io/family-schemas/external.json#/definitions/attr_ext_uri",
                        },
                        "definition_uri": {
                            "description": "The URI link to an existing definition",
                            "type": "string",
                            "format": "uri",
                        },
                    },
                },
                "dimensionType": {
                    "description": "A Dimension Column",
                    "type": "object",
                    "required": [],
                    "additionalProperties": false,
                    "properties": {
                        "type": {
                            "description": "Column type, defaults to 'dimension'.",
                            "type": "string",
                            "default": "dimension",
                        },
                        "label": {
                            "description": "Replacement label for the Dimension",
                            "type": "string",
                        },
                        "description": {
                            "description": "Description for the dimension",
                            "type": "string",
                        },
                        "from_existing": {
                            "description": "The URI of the codelist associated with the dimension *OR* the relative file path to the code-list's local definition. (qb:codeList)",
                            "oneOf": [
                                {
                                    "description": "The relative file path to the code-list's local definition",
                                    "type": "string",
                                    "format": "uri",
                                },
                                {
                                    "description": "The URI of the codelist associated with the dimension.",
                                    "$ref": "http://gss-cogs.github.io/family-schemas/external.json#/definitions/dim_ext_uri",
                                },
                            ],
                        },
                        "definition_uri": {
                            "description": "Source URI for the definition of the Dimension",
                            "$ref": "#/definitions/v1.0/types/definition_uri",
                        },
                        "cell_uri_template": {
                            "description": "Source URI for the code-list referred to by the dimension, e.g. 'http://example.org/code-list/{+some_column}'",
                            "type": "string",
                            "format": "uri",
                        },
                        "code_list": {"$ref": "#/definitions/v1.0/types/code_list"},
                    },
                },
                "observationType": {
                    "description": "An observation column",
                    "type": "object",
                    "additionalProperties": false,
                    "required": ["type", "data_type"],
                    "properties": {
                        "type": {
                            "description": "Column type.",
                            "type": "string",
                            "default": "observation",
                        },
                        "data_type": {"$ref": "#/definitions/v1.0/dataTypes"},
                        "unit": {
                            "description": "The units being measured in this observation",
                            "$ref": "#/definitions/v1.0/valueTypes/unitType",
                        },
                        "measure": {
                            "description": "The measure used for this observation",
                            "$ref": "#/definitions/v1.0/valueTypes/measureType",
                        },
                    },
                },
                "measureType": {
                    "type": "object",
                    "additionalProperties": false,
                    "required": ["label"],
                    "properties": {
                        "label": {
                            "description": "Replacement label for the Measure",
                            "type": "string",
                        },
                        "description": {
                            "description": "A description for the Measure",
                            "type": "string",
                        },
                        "from_existing": {
                            "description": "URI of an Existing Qb Dimension",
                            "$ref": "http://gss-cogs.github.io/family-schemas/external.json#/definitions/meas_ext_uri",
                        },
                        "definition_uri": {
                            "description": "Source URI for the definition of the Dimension",
                            "$ref": "#/definitions/v1.0/types/definition_uri",
                        },
                        "cell_uri_template": {
                            "description": "URI template used for constructing measures e.g. 'http://example.org/measures/{+some_column}'",
                            "type": "string",
                            "format": "uri",
                        },
                    },
                },
                "unitType": {
                    "type": "object",
                    "additionalProperties": false,
                    "required": ["label"],
                    "properties": {
                        "label": {
                            "description": "Replacement label for the Unit",
                            "type": "string",
                        },
                        "description": {
                            "description": "A description for the Unit",
                            "type": "string",
                        },
                        "from_existing": {
                            "description": "URI of an Existing Qb Dimension",
                            "$ref": "http://gss-cogs.github.io/family-schemas/external.json#/definitions/meas_ext_uri",
                        },
                        "definition_uri": {
                            "description": "Source URI for the definition of the Dimension",
                            "$ref": "#/definitions/v1.0/types/definition_uri",
                        },
                        "scaling_factor": {
                            "description": "Scaling factor of the observation to base unit",
                            "type": "number",
                        },
                        "si_scaling_factor": {
                            "description": "Scaling factor of the observation to SI base unit",
                            "type": "number",
                        },
                        "quantity_kind": {
                            "description": "The kind of unit being measured in this observation",
                            "type": "string",
                            "format": "uri",
                        },
                    },
                },
                "boolValueTrue": {"type": "boolean", "const": true},
            },
            "dataTypes": {
                "type": "string",
                "default": "decimal",
                "enum": [
                    "anyURI",
                    "boolean",
                    "date",
                    "dateTime",
                    "dateTimeStamp",
                    "decimal",
                    "integer",
                    "long",
                    "int",
                    "short",
                    "nonNegativeInteger",
                    "positiveInteger",
                    "unsignedLong",
                    "unsignedInt",
                    "unsignedShort",
                    "nonPositiveInteger",
                    "negativeInteger",
                    "double",
                    "float",
                    "string",
                    "language",
                    "time",
                ],
            },
            "themeTypes": {
                "description": "A theme or list of themes that describe the focus of the data",
                "additionalProperties": {
                    "oneOf": [
                        {"$ref": "#/definitions/v1.0/types/theme"},
                        {
                            "themeList": {
                                "description": "A list of themes",
                                "type": "array",
                                "items": {"$ref": "#/definitions/v1.0/types/theme"},
                            }
                        },
                    ]
                },
            },
            "keywordTypes": {
                "description": "A keyword or list of keywords relevant to the cube",
                "oneOf": [
                    {"$ref": "#/definitions/v1.0/types/keyword"},
                    {
                        "type": "array",
                        "items": {"$ref": "#/definitions/v1.0/types/keyword"},
                    },
                ],
            },
            "types": {
                "title": {"description": "A title for this dataset", "type": "string"},
                "theme": {
                    "description": "A string describing a theme",
                    "type": "string",
                },
                "keyword": {
                    "description": "A string describing a keyword",
                    "type": "string",
                },
                "definition_uri": {
                    "description": "A string describing a theme",
                    "type": "string",
                    "format": "uri",
                },
                "dim_uri": {
                    "description": "The URI for this dimension.",
                    "$ref": "http://gss-cogs.github.io/family-schemas/external.json#/definitions/dim_ext_uri",
                },
                "measure_uri": {
                    "description": "The URI of the measure.",
                    "$ref": "http://gss-cogs.github.io/family-schemas/external.json#/definitions/meas_ext_uri",
                },
                "unit_uri": {
                    "description": "The URI of the measurement units for this measure.",
                    "$ref": "http://gss-cogs.github.io/family-schemas/external.json#/definitions/unit_ext_uri",
                },
                "attr_uri": {
                    "description": "The URI for this attribute.",
                    "$ref": "http://gss-cogs.github.io/family-schemas/external.json#/definitions/attr_ext_uri",
                },
                "code_list": {
                    "description": "The URI of the codelist or false for no codelist.",
                    "oneOf": [
                        {"type": "boolean", "default": false},
                        {
                            "description": "The URI of the codelist associated with the dimension.",
                            "$ref": "http://gss-cogs.github.io/family-schemas/external.json#/definitions/dim_ext_uri",
                        },
                    ],
                },
            },
        }
    },
}
